// Copyright (c) 2021 Terminus, Inc.
//
// This program is free software: you can use, redistribute, and/or modify
// it under the terms of the GNU Affero General Public License, version 3
// or later ("AGPL"), as published by the Free Software Foundation.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE.
//
// You should have received a copy of the GNU Affero General Public License
// along with this program. If not, see <http://www.gnu.org/licenses/>.

import {
  getTraceHistoryList,
  requestTrace,
  getTraceDetail,
  getTraceStatus,
  cancelTraceStatus,
  getTraceDetailContent,
  getSpanDetailContent,
} from '../services/trace-querier';
import { isEmpty } from 'lodash';
import traceConvert from '../common/utils/traceConvert';
import { createStore } from 'core/cube';

import i18n from 'i18n';

const transformTrace = (trace: MONITOR_TRACE.ITrace) => {
  if (isEmpty(trace)) return {};
  const traceDetail = traceConvert(trace);
  traceDetail.spans?.forEach((i) => {
    // eslint-disable-next-line
    i.isExpand = i.isShow = true;
  });
  return traceDetail;
};

interface IParams {
  method: string;
  url: string;
  body: string;
  query: Obj<string>;
  header: Obj<string>;
  responseCode?: number;
}

interface IState {
  requestTraceParams: IParams;
  currentTraceRequestId: string;
  traceHistoryList: MONITOR_TRACE.IHistory[];
  traceStatusList: MONITOR_TRACE.IStatus[];
  traceStatusDetail: MONITOR_TRACE.IStatus | {};
  traceDetailContent: MONITOR_TRACE.ITraceDetail | {};
  spanDetailContent: {
    visible: boolean;
    span: any;
  };
  traceStatusListPaging: {
    page: number;
    size: number;
    total: number;
  };
}

const DEFAULT_REQUEST_PARAMS = {
  method: 'GET',
  url: '',
  body: '',
  query: {},
  header: {},
};

const initState: IState = {
  requestTraceParams: DEFAULT_REQUEST_PARAMS,
  currentTraceRequestId: '',
  traceHistoryList: [],
  traceStatusList: [],
  traceStatusDetail: {},
  traceDetailContent: {},
  spanDetailContent: {
    visible: false,
    span: {},
  },
  traceStatusListPaging: {
    page: 1,
    size: 10,
    total: 0,
  },
};

const traceQuerier = createStore({
  name: 'traceQuerier',
  state: initState,
  effects: {
    async getTraceHistoryList({ call, update, getParams }) {
      const { terminusKey } = getParams();
      const { history: traceHistoryList } = await call(getTraceHistoryList, { terminusKey });
      update({ traceHistoryList });
    },
    async requestTrace({ select, call, getParams }, payload?: MONITOR_TRACE.ITraceRequestBody) {
      const { terminusKey, projectId } = getParams();
      const requestTraceParams = select((s) => s.requestTraceParams);
      const { requestId: currentTraceRequestId } = await call(requestTrace, {
        ...requestTraceParams,
        ...(payload || {}),
        terminusKey,
        projectId,
      });
      traceQuerier.reducers.setCurrentTraceRequestId(currentTraceRequestId);
      await traceQuerier.effects.getTraceHistoryList();
      await traceQuerier.effects.getTraceDetail({ requestId: currentTraceRequestId });
      await traceQuerier.effects.getTraceStatusDetail({ requestId: currentTraceRequestId });
    },
    async getTraceDetail({ call, getParams }, payload: { requestId: string }) {
      const { terminusKey } = getParams();
      const { method, url, body, query, header, ...rest } = await call(getTraceDetail, { terminusKey, ...payload });
      traceQuerier.reducers.setRequestTraceParams({
        method: method || 'GET',
        url: url || '',
        body: body || '',
        query: query || {},
        header: header || {},
        ...rest,
      });
    },
    async getTraceStatusDetail({ select, call, update, getParams }, payload: { requestId: string }) {
      const { terminusKey } = getParams();
      const currentTraceRequestId = select((s) => s.currentTraceRequestId);
      if (currentTraceRequestId !== payload.requestId) return;

      const traceStatusDetail = await call(getTraceStatus, { terminusKey, ...payload });
      update({ traceStatusDetail });
      if (traceStatusDetail.status === 0) {
        const delay = (ms: number) =>
          new Promise((resolve) => {
            setTimeout(resolve, ms);
          });
        await call(delay, 5000);
        await traceQuerier.effects.getTraceStatusDetail({ requestId: payload.requestId });
      }
      if (traceStatusDetail.status === 1) {
        await traceQuerier.effects.getTraceDetailContent({ traceId: payload.requestId });
      }
    },
    async cancelTraceStatus({ select, call, getParams }, payload: { requestId: string }) {
      const { terminusKey } = getParams();
      const currentTraceRequestId = select((s) => s.currentTraceRequestId);
      await call(
        cancelTraceStatus,
        { terminusKey, ...payload },
        {
          successMsg: i18n.t('msp:cancelled successfully'),
          errorMsg: i18n.t('msp:Failed to cancel. Please try again late.'),
        },
      );

      await traceQuerier.effects.getTraceStatusDetail({ requestId: currentTraceRequestId });
    },
    async getTraceDetailContent(
      { call, update, getParams },
      payload: Merge<Omit<MONITOR_TRACE.IQuerySpan, 'scopeId'>, { needReturn?: boolean }>,
    ) {
      const { terminusKey } = getParams();
      const response = await call(getTraceDetailContent, { ...payload, scopeId: terminusKey });
      const response1 = {
        spans: [
          {
            id: '72b53a20-663b-4ec3-925f-c551caf1634c',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'POST http://user-admin.oms-uat.ubras.cn/api/user/web/token',
            startTime: 1630997932819383000,
            endTime: 1630997932827202600,
            parentSpanId: '6701aea5-6556-492e-8af9-f1427086782e',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: 'user-admin.oms-uat.ubras.cn:80',
              host_ip: '10.65.6.179',
              http_method: 'POST',
              http_path: '/api/user/web/token',
              http_status_code: '200',
              http_url: 'http://user-admin.oms-uat.ubras.cn/api/user/web/token',
              operation_name: 'POST http://user-admin.oms-uat.ubras.cn/api/user/web/token',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6701aea5-6556-492e-8af9-f1427086782e',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_admin',
              service_name: 'admin',
              span_id: '72b53a20-663b-4ec3-925f-c551caf1634c',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 7819695,
          },
          {
            id: '75933bf1-b9f4-426e-af1f-dfc9244f685e',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Redisson HGET',
            startTime: 1630997933014000000,
            endTime: 1630997933014000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redisson',
              db_statement: 'HGET ce5cb4be-6562-491a-9a94-55b686cee314:businessContext ?',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.180',
              operation_name: 'Redisson HGET',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '75933bf1-b9f4-426e-af1f-dfc9244f685e',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 0,
          },
          {
            id: '47930a58-d9a4-40c8-a822-349a48a6ece9',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/PreparedStatement/executeQuery',
            startTime: 1630997933010000000,
            endTime: 1630997933012000000,
            parentSpanId: 'c5893262-168f-4335-a030-fac67fd03ccd',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_statement:
                'SELECT `id` , `orderBy` , `attributeStatus` , `_version` , `createdAt` , `updatedAt` , `isDeleted` , `deletedAt` , `UpdatedBy` AS `updatedBy` , `CreatedBy` AS `createdBy` , `parentCategoryAttribute` AS `parentCategoryAttribute` , `category` AS `category` FROM `md__attribute_inheritance_b_o` WHERE (`category` = ? ) AND `isDeleted` = 0 ; ',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.161',
              operation_name: 'Mysql/PreparedStatement/executeQuery',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'c5893262-168f-4335-a030-fac67fd03ccd',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '47930a58-d9a4-40c8-a822-349a48a6ece9',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 2000000,
          },
          {
            id: 'b12594d2-eab1-4f27-8a07-b171a99ac051',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/HGET/writeToChannelAndFlush',
            startTime: 1630997932923996400,
            endTime: 1630997932923075600,
            parentSpanId: 'dd0efef5-d932-4376-86da-246765b3f964',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_statement: 'HGET',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/HGET/writeToChannelAndFlush',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'dd0efef5-d932-4376-86da-246765b3f964',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'b12594d2-eab1-4f27-8a07-b171a99ac051',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 920704,
          },
          {
            id: '82b8d317-0f56-44b2-88ad-1ea718407781',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP POST',
            startTime: 1630997932899000000,
            endTime: 1630997932908000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'POST',
              http_status_code: '200',
              http_url: 'http://172.22.147.197:8080/api/data/sql',
              operation_name: 'HTTP POST',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'http://172.22.147.197:8080',
              peer_hostname: '172.22.147.197:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '82b8d317-0f56-44b2-88ad-1ea718407781',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 9000000,
          },
          {
            id: '80bee651-354d-4101-b6b4-57a134cf8e97',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName:
              'POST http://meta-store-27f863a259.project-3-staging.svc.cluster.local:8080/api/internal/trantor/event/publish',
            startTime: 1630997932842039800,
            endTime: 1630997932844834300,
            parentSpanId: '596e790c-0aa4-48ed-9605-1477248a24c7',
            timestamp: 0,
            tags: {
              application_id: '5',
              application_name: 'trantor-gaia-workspace',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: 'meta-store-27f863a259.project-3-staging.svc.cluster.local:8080',
              host_ip: '10.65.6.171',
              http_method: 'POST',
              http_path: '/api/internal/trantor/event/publish',
              http_status_code: '200',
              http_url:
                'http://meta-store-27f863a259.project-3-staging.svc.cluster.local:8080/api/internal/trantor/event/publish',
              operation_name:
                'POST http://meta-store-27f863a259.project-3-staging.svc.cluster.local:8080/api/internal/trantor/event/publish',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '596e790c-0aa4-48ed-9605-1477248a24c7',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '11',
              runtime_name: 'release/develop',
              service_name: 'meta-store',
              span_id: '80bee651-354d-4101-b6b4-57a134cf8e97',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 2794609,
          },
          {
            id: '236cf87a-758a-4ead-b6d2-62cbf97e22a0',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/HGET/accept',
            startTime: 1630997932935578000,
            endTime: 1630997932935583200,
            parentSpanId: '44e6c8a6-c8f5-4159-b16f-58055286b96b',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/HGET/accept',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '44e6c8a6-c8f5-4159-b16f-58055286b96b',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '236cf87a-758a-4ead-b6d2-62cbf97e22a0',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 5253,
          },
          {
            id: 'b2e6c464-1e89-4255-a755-c8e02425c98e',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/PreparedStatement/executeQuery',
            startTime: 1630997932887000000,
            endTime: 1630997932889000000,
            parentSpanId: 'eca2b5f8-0d4f-416c-8b80-0573d7b49e04',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_statement:
                'SELECT `id` , `categoryCode` , `categoryName` , `categoryUsage` , `categoryType` , `categoryLevel` , `isLeaf` , `usedCnt` , `categoryStatus` , `categoryImage` , `categoryDscp` , `_version` , `createdAt` , `updatedAt` , `isDeleted` , `deletedAt` , `UpdatedBy` AS `updatedBy` , `CreatedBy` AS `createdBy` , `parentCategory` AS `parentCategory` , `taxRate` AS `taxRate` FROM `md__category_b_o` WHERE (`id` = ? ) AND `isDeleted` = 0 ; ',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.172',
              operation_name: 'Mysql/PreparedStatement/executeQuery',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'eca2b5f8-0d4f-416c-8b80-0573d7b49e04',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: 'b2e6c464-1e89-4255-a755-c8e02425c98e',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 2000000,
          },
          {
            id: 'b4f9941d-f5f4-482f-a7c6-8cfbf4b3033a',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/HGET/accept',
            startTime: 1630997932859061200,
            endTime: 1630997932859066600,
            parentSpanId: '961aa709-a880-4eb3-b8b3-35e049018c33',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/HGET/accept',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '961aa709-a880-4eb3-b8b3-35e049018c33',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'b4f9941d-f5f4-482f-a7c6-8cfbf4b3033a',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 5182,
          },
          {
            id: '23c6b661-997d-4c30-9028-d85c4ebe2523',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/writeToChannelAndFlush',
            startTime: 1630997932821487400,
            endTime: 1630997932821543400,
            parentSpanId: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_statement: 'GET',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/writeToChannelAndFlush',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '23c6b661-997d-4c30-9028-d85c4ebe2523',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 56159,
          },
          {
            id: '8d52ed34-ce95-48e4-a93f-0d8cf0cf59ae',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/onComplete',
            startTime: 1630997932821380900,
            endTime: 1630997932821384400,
            parentSpanId: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/onComplete',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '8d52ed34-ce95-48e4-a93f-0d8cf0cf59ae',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3525,
          },
          {
            id: '92142b78-63e3-4c3f-a65e-6d7cbffaccf5',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'POST http://172.22.147.197:8080/api/data/sql',
            startTime: 1630997932891000000,
            endTime: 1630997932898000000,
            parentSpanId: 'edf60186-239d-478b-a128-82b396bc9042',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: '172.22.147.197:8080',
              host_ip: '10.65.6.161',
              http_method: 'POST',
              http_path: '/api/data/sql',
              http_status_code: '200',
              http_url: 'http://172.22.147.197:8080/api/data/sql',
              operation_name: 'POST http://172.22.147.197:8080/api/data/sql',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'edf60186-239d-478b-a128-82b396bc9042',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '92142b78-63e3-4c3f-a65e-6d7cbffaccf5',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 7000000,
          },
          {
            id: '9fa88f20-8dc6-49b0-9e69-1466b74a4ba1',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Redisson HGET',
            startTime: 1630997932847000000,
            endTime: 1630997932847000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redisson',
              db_statement: 'HGET ce5cb4be-6562-491a-9a94-55b686cee314:businessContext ?',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.180',
              operation_name: 'Redisson HGET',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '9fa88f20-8dc6-49b0-9e69-1466b74a4ba1',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 0,
          },
          {
            id: '596e790c-0aa4-48ed-9605-1477248a24c7',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP POST',
            startTime: 1630997932842000000,
            endTime: 1630997932847000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'POST',
              http_status_code: '200',
              http_url:
                'http://meta-store-27f863a259.project-3-staging.svc.cluster.local:8080/api/internal/trantor/event/publish',
              operation_name: 'HTTP POST',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'http://meta-store-27f863a259.project-3-staging.svc.cluster.local:8080',
              peer_hostname: 'meta-store-27f863a259.project-3-staging.svc.cluster.local:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '596e790c-0aa4-48ed-9605-1477248a24c7',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 5000000,
          },
          {
            id: '19ce04a9-f20e-4bb5-8bde-fe17ad75f519',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/PreparedStatement/executeQuery',
            startTime: 1630997933021000000,
            endTime: 1630997933025000000,
            parentSpanId: '8b23c30c-77d7-401a-8583-2219be876857',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_statement:
                'SELECT `id` , `deliveryTemplateCode` , `isFree` , `amountLimit` , `deliverMethodDict` , `chargeMethodDict` , `shipAmt_type` , `shipAmt_value` , `initCnt` , `initAmt_type` , `initAmt_value` , `incrCnt` , `incrAmt_type` , `incrAmt_value` , `lowPrc_type` , `lowPrc_value` , `lowAmt_type` , `lowAmt_value` , `highPrc_type` , `highPrc_value` , `highAmt_type` , `highAmt_value` , `middleAmt_type` , `middleAmt_value` , `name` , `isDefault` , `status` , `_version` , `createdAt` , `updatedAt` , `isDeleted` , `deletedAt` , `UpdatedBy` AS `updatedBy` , `CreatedBy` AS `createdBy` , `shop` AS `shop` , `entity` AS `entity` FROM `item__delivery_fee_template_b_o` WHERE (`isDefault` = ? AND `entity` = ? ) AND `isDeleted` = 0 LIMIT 0  , 2  ; ',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.161',
              operation_name: 'Mysql/PreparedStatement/executeQuery',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '8b23c30c-77d7-401a-8583-2219be876857',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '19ce04a9-f20e-4bb5-8bde-fe17ad75f519',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4000000,
          },
          {
            id: '8b23c30c-77d7-401a-8583-2219be876857',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'POST http://172.22.147.197:8080/api/data/sql',
            startTime: 1630997933017000000,
            endTime: 1630997933025000000,
            parentSpanId: '1799b4b2-43ed-4c74-949f-5f1d05719919',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: '172.22.147.197:8080',
              host_ip: '10.65.6.161',
              http_method: 'POST',
              http_path: '/api/data/sql',
              http_status_code: '200',
              http_url: 'http://172.22.147.197:8080/api/data/sql',
              operation_name: 'POST http://172.22.147.197:8080/api/data/sql',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '1799b4b2-43ed-4c74-949f-5f1d05719919',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '8b23c30c-77d7-401a-8583-2219be876857',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 8000000,
          },
          {
            id: '652865a8-3544-48fb-bfae-3f91f3af7bc0',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/onComplete',
            startTime: 1630997932932216000,
            endTime: 1630997932932218600,
            parentSpanId: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/onComplete',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '652865a8-3544-48fb-bfae-3f91f3af7bc0',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 2563,
          },
          {
            id: '07a1f654-0eeb-4cf6-985c-f0044d1f93bb',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
            startTime: 1630997932930276900,
            endTime: 1630997932934283300,
            parentSpanId: '8d149dea-0bd5-4f69-bfe3-d283dea500e0',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Dubbo',
              dubbo_method: 'queryLocalCacheFlag',
              dubbo_service: 'io.terminus.taurus.api.facade.AuthFacade',
              host: '172.22.148.147:0',
              host_ip: '10.65.6.160',
              operation_name: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '8d149dea-0bd5-4f69-bfe3-d283dea500e0',
              peer_address: '172.22.148.23:26830',
              peer_port: '26830',
              peer_service: 'io.terminus.taurus.api.facade.AuthFacade',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_admin',
              service_name: 'admin',
              span_id: '07a1f654-0eeb-4cf6-985c-f0044d1f93bb',
              span_kind: 'client',
              span_layer: 'rpc',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4006503,
          },
          {
            id: '0b5ab346-080c-451d-86ef-ed55749b4042',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/PreparedStatement/executeQuery',
            startTime: 1630997932913000000,
            endTime: 1630997932917000000,
            parentSpanId: '66beebbf-8616-4d3a-862e-bcdabba1e1ef',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_statement:
                'SELECT `id` , `categoryCode` , `categoryName` , `categoryUsage` , `categoryType` , `categoryLevel` , `isLeaf` , `usedCnt` , `categoryStatus` , `categoryImage` , `categoryDscp` , `_version` , `createdAt` , `updatedAt` , `isDeleted` , `deletedAt` , `UpdatedBy` AS `updatedBy` , `CreatedBy` AS `createdBy` , `parentCategory` AS `parentCategory` , `taxRate` AS `taxRate` FROM `md__category_b_o` WHERE (`id` = ? ) AND `isDeleted` = 0 ; ',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.172',
              operation_name: 'Mysql/PreparedStatement/executeQuery',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '66beebbf-8616-4d3a-862e-bcdabba1e1ef',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '0b5ab346-080c-451d-86ef-ed55749b4042',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4000000,
          },
          {
            id: 'a7d12445-a7c5-4a5d-9735-4d20171b4c36',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/onComplete',
            startTime: 1630997932825843700,
            endTime: 1630997932825845200,
            parentSpanId: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/onComplete',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'a7d12445-a7c5-4a5d-9735-4d20171b4c36',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 1728,
          },
          {
            id: '5e86bead-bb39-45b1-9148-7758e77c5563',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/PEXPIRE/onComplete',
            startTime: 1630997932823169000,
            endTime: 1630997932823171800,
            parentSpanId: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/PEXPIRE/onComplete',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '5e86bead-bb39-45b1-9148-7758e77c5563',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 2745,
          },
          {
            id: '616c3628-7956-4511-b891-fe834e600ac9',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/HGET/accept',
            startTime: 1630997932924607000,
            endTime: 1630997932924612000,
            parentSpanId: '631ef382-121b-478b-b14e-7764d74f1805',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/HGET/accept',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '631ef382-121b-478b-b14e-7764d74f1805',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '616c3628-7956-4511-b891-fe834e600ac9',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 5144,
          },
          {
            id: '631ef382-121b-478b-b14e-7764d74f1805',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/HGET/onComplete',
            startTime: 1630997932923954200,
            endTime: 1630997932923956200,
            parentSpanId: 'dd0efef5-d932-4376-86da-246765b3f964',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/HGET/onComplete',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'dd0efef5-d932-4376-86da-246765b3f964',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '631ef382-121b-478b-b14e-7764d74f1805',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 2040,
          },
          {
            id: 'c5893262-168f-4335-a030-fac67fd03ccd',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'POST http://172.22.147.197:8080/api/data/sql',
            startTime: 1630997932937000000,
            endTime: 1630997933013000000,
            parentSpanId: 'beed6195-954f-42fa-a648-4799e29b1982',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: '172.22.147.197:8080',
              host_ip: '10.65.6.161',
              http_method: 'POST',
              http_path: '/api/data/sql',
              http_status_code: '200',
              http_url: 'http://172.22.147.197:8080/api/data/sql',
              operation_name: 'POST http://172.22.147.197:8080/api/data/sql',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'beed6195-954f-42fa-a648-4799e29b1982',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: 'c5893262-168f-4335-a030-fac67fd03ccd',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 76000000,
          },
          {
            id: 'b5a6fb7d-cc31-470e-a357-a7aeb6b579db',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'POST http://172.22.147.197:8080/api/data/sql',
            startTime: 1630997932876000000,
            endTime: 1630997932884000000,
            parentSpanId: '4ef916bd-13cc-4e49-b631-b37487cf5546',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: '172.22.147.197:8080',
              host_ip: '10.65.6.161',
              http_method: 'POST',
              http_path: '/api/data/sql',
              http_status_code: '200',
              http_url: 'http://172.22.147.197:8080/api/data/sql',
              operation_name: 'POST http://172.22.147.197:8080/api/data/sql',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '4ef916bd-13cc-4e49-b631-b37487cf5546',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: 'b5a6fb7d-cc31-470e-a357-a7aeb6b579db',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 8000000,
          },
          {
            id: '305fc667-69eb-4549-bd72-e9b6fe9f9fdb',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Redisson EVAL',
            startTime: 1630997932872000000,
            endTime: 1630997932872000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redisson',
              db_statement:
                "EVAL local v = redis.call('hget', KEYS[1], ARGV[1]); redis.call('hset', KEYS[1], ARGV[1], ARGV[2]); return v 1 ce5cb4be-6562-491a-9a94-55b686cee314:businessContext ? ?",
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.180',
              operation_name: 'Redisson EVAL',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '305fc667-69eb-4549-bd72-e9b6fe9f9fdb',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 0,
          },
          {
            id: '056df025-8a45-44af-a22d-feaabe99aec6',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'POST http://172.22.149.240:8080/api/data/sql',
            startTime: 1630997932860000000,
            endTime: 1630997932870000000,
            parentSpanId: '18000374-a003-4afa-95f3-6126397bfc74',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: '172.22.149.240:8080',
              host_ip: '10.65.6.172',
              http_method: 'POST',
              http_path: '/api/data/sql',
              http_status_code: '200',
              http_url: 'http://172.22.149.240:8080/api/data/sql',
              operation_name: 'POST http://172.22.149.240:8080/api/data/sql',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '18000374-a003-4afa-95f3-6126397bfc74',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '056df025-8a45-44af-a22d-feaabe99aec6',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 10000000,
          },
          {
            id: '67a6222b-449e-4dd6-abdd-de87714470c1',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/onComplete',
            startTime: 1630997932855485700,
            endTime: 1630997932855488500,
            parentSpanId: '1c52e883-ee2c-447a-8490-d1f5e481520b',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/onComplete',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '1c52e883-ee2c-447a-8490-d1f5e481520b',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '67a6222b-449e-4dd6-abdd-de87714470c1',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 2756,
          },
          {
            id: 'beed6195-954f-42fa-a648-4799e29b1982',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP POST',
            startTime: 1630997932936000000,
            endTime: 1630997933013000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'POST',
              http_status_code: '200',
              http_url: 'http://172.22.147.197:8080/api/data/sql',
              operation_name: 'HTTP POST',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'http://172.22.147.197:8080',
              peer_hostname: '172.22.147.197:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: 'beed6195-954f-42fa-a648-4799e29b1982',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 77000000,
          },
          {
            id: 'c2784886-275e-4fb0-bae7-b92c556a9efb',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP POST',
            startTime: 1630997932925000000,
            endTime: 1630997932929000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'POST',
              http_status_code: '200',
              http_url: 'http://172.22.147.197:8080/api/data/sql',
              operation_name: 'HTTP POST',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'http://172.22.147.197:8080',
              peer_hostname: '172.22.147.197:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: 'c2784886-275e-4fb0-bae7-b92c556a9efb',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4000000,
          },
          {
            id: '6701aea5-6556-492e-8af9-f1427086782e',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP POST',
            startTime: 1630997932770000000,
            endTime: 1630997932840000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'POST',
              http_status_code: '200',
              http_url: 'https://uc.oms-uat.ubras.cn/api/user/web/token',
              operation_name: 'HTTP POST',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'https://uc.oms-uat.ubras.cn:-1',
              peer_hostname: 'uc.oms-uat.ubras.cn:-1',
              peer_port: '-1',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '6701aea5-6556-492e-8af9-f1427086782e',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 70000000,
          },
          {
            id: 'f6619471-7fb8-4e03-8efd-3190e3e76c82',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/writeToChannelAndFlush',
            startTime: 1630997932932266000,
            endTime: 1630997932932304000,
            parentSpanId: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_statement: 'GET',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/writeToChannelAndFlush',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'f6619471-7fb8-4e03-8efd-3190e3e76c82',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 37938,
          },
          {
            id: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
            startTime: 1630997932932163300,
            endTime: 1630997932935632600,
            parentSpanId: '07a1f654-0eeb-4cf6-985c-f0044d1f93bb',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Dubbo',
              dubbo_method: 'queryLocalCacheFlag',
              dubbo_service: 'io.terminus.taurus.api.facade.AuthFacade',
              host: '172.22.148.23:26830',
              host_ip: '10.65.6.162',
              operation_name: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '07a1f654-0eeb-4cf6-985c-f0044d1f93bb',
              peer_address: '172.22.148.147:60084',
              peer_port: '26830',
              peer_service: 'io.terminus.taurus.api.facade.AuthFacade',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
              span_kind: 'server',
              span_layer: 'rpc',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3469224,
          },
          {
            id: 'b2a9847f-9b25-441d-ad9c-157d406ffce9',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/writeToChannelAndFlush',
            startTime: 1630997932921118700,
            endTime: 1630997932921167600,
            parentSpanId: 'dd0efef5-d932-4376-86da-246765b3f964',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_statement: 'GET',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/writeToChannelAndFlush',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'dd0efef5-d932-4376-86da-246765b3f964',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'b2a9847f-9b25-441d-ad9c-157d406ffce9',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 48925,
          },
          {
            id: '55e24795-cc53-4e56-871a-236a55e308be',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP GET',
            startTime: 1630997932918000000,
            endTime: 1630997932925000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'GET',
              http_status_code: '200',
              http_url:
                'http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache?uuid=8865a710-b206-4cc3-b586-be5fb75a46fagaia_Gaia_product&type=trantor_data_permission&userId=528045',
              operation_name: 'HTTP GET',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'http://admin-01e1149851.project-3-staging.svc.cluster.local:8080',
              peer_hostname: 'admin-01e1149851.project-3-staging.svc.cluster.local:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '55e24795-cc53-4e56-871a-236a55e308be',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 7000000,
          },
          {
            id: '961aa709-a880-4eb3-b8b3-35e049018c33',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/HGET/onComplete',
            startTime: 1630997932857443800,
            endTime: 1630997932857445600,
            parentSpanId: '1c52e883-ee2c-447a-8490-d1f5e481520b',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/HGET/onComplete',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '1c52e883-ee2c-447a-8490-d1f5e481520b',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '961aa709-a880-4eb3-b8b3-35e049018c33',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 1977,
          },
          {
            id: 'afc06d34-264b-4391-8bf4-1233bbe97b2f',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/Statement/execute',
            startTime: 1630997932910000000,
            endTime: 1630997932913000000,
            parentSpanId: '66beebbf-8616-4d3a-862e-bcdabba1e1ef',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.172',
              operation_name: 'Mysql/Statement/execute',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '66beebbf-8616-4d3a-862e-bcdabba1e1ef',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: 'afc06d34-264b-4391-8bf4-1233bbe97b2f',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3000000,
          },
          {
            id: '111a80e5-bab5-4bc8-ad89-0d66b29fca1c',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/PreparedStatement/executeQuery',
            startTime: 1630997932895000000,
            endTime: 1630997932898000000,
            parentSpanId: '92142b78-63e3-4c3f-a65e-6d7cbffaccf5',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_statement:
                'SELECT `id` , `categoryCode` , `categoryName` , `categoryUsage` , `categoryType` , `categoryLevel` , `isLeaf` , `usedCnt` , `categoryStatus` , `categoryImage` , `categoryDscp` , `_version` , `createdAt` , `updatedAt` , `isDeleted` , `deletedAt` , `UpdatedBy` AS `updatedBy` , `CreatedBy` AS `createdBy` , `parentCategory` AS `parentCategory` , `taxRate` AS `taxRate` FROM `md__category_b_o` WHERE (`id` = ? ) AND `isDeleted` = 0 ; ',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.161',
              operation_name: 'Mysql/PreparedStatement/executeQuery',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '92142b78-63e3-4c3f-a65e-6d7cbffaccf5',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '111a80e5-bab5-4bc8-ad89-0d66b29fca1c',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3000000,
          },
          {
            id: '3498cafa-b090-4bd5-a917-f5bf63f6538e',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Redisson PEXPIRE',
            startTime: 1630997932873000000,
            endTime: 1630997932874000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redisson',
              db_statement: 'PEXPIRE ce5cb4be-6562-491a-9a94-55b686cee314:businessContext 10000000',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.180',
              operation_name: 'Redisson PEXPIRE',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '3498cafa-b090-4bd5-a917-f5bf63f6538e',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 1000000,
          },
          {
            id: '1c52e883-ee2c-447a-8490-d1f5e481520b',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
            startTime: 1630997932855421200,
            endTime: 1630997932859115300,
            parentSpanId: '7aa57686-e9ee-44ba-b37c-0c907f76d8db',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Dubbo',
              dubbo_method: 'queryLocalCacheFlag',
              dubbo_service: 'io.terminus.taurus.api.facade.AuthFacade',
              host: '172.22.148.23:26830',
              host_ip: '10.65.6.162',
              operation_name: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '7aa57686-e9ee-44ba-b37c-0c907f76d8db',
              peer_address: '172.22.148.147:60084',
              peer_port: '26830',
              peer_service: 'io.terminus.taurus.api.facade.AuthFacade',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '1c52e883-ee2c-447a-8490-d1f5e481520b',
              span_kind: 'server',
              span_layer: 'rpc',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3694298,
          },
          {
            id: 'e93aabfe-d8b1-4e03-8091-42608f3fa1f5',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP GET',
            startTime: 1630997932851000000,
            endTime: 1630997932859000000,
            parentSpanId: '15182ccd-76c0-47f8-a27e-dc988adaa43d',
            timestamp: 0,
            tags: {
              application_id: '9',
              application_name: 'gaia-base-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006131',
              host_ip: '10.65.6.131',
              http_method: 'GET',
              http_status_code: '200',
              http_url:
                'http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache?uuid=15f54380-a178-4ee8-8f53-4ddce7e79485gaia_Gaia_product&type=trantor_data_permission&userId=528045',
              operation_name: 'HTTP GET',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '15182ccd-76c0-47f8-a27e-dc988adaa43d',
              peer_address: 'http://admin-01e1149851.project-3-staging.svc.cluster.local:8080',
              peer_hostname: 'admin-01e1149851.project-3-staging.svc.cluster.local:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '14',
              runtime_name: 'release/develop',
              service_id: '9_release/develop_gaia-base-runtime',
              service_name: 'gaia-base-runtime',
              span_id: 'e93aabfe-d8b1-4e03-8091-42608f3fa1f5',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 8000000,
          },
          {
            id: '20523b2c-40e6-4767-86a3-0e4f85d8aa41',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Redisson DEL',
            startTime: 1630997933029000000,
            endTime: 1630997933029000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redisson',
              db_statement: 'DEL ce5cb4be-6562-491a-9a94-55b686cee314:businessContext',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.180',
              operation_name: 'Redisson DEL',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '20523b2c-40e6-4767-86a3-0e4f85d8aa41',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 0,
          },
          {
            id: 'c0481ee5-717e-4f08-8e3c-adc4404fe4dc',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Redisson HGET',
            startTime: 1630997933027000000,
            endTime: 1630997933027000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redisson',
              db_statement: 'HGET ce5cb4be-6562-491a-9a94-55b686cee314:businessContext ?',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.180',
              operation_name: 'Redisson HGET',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: 'c0481ee5-717e-4f08-8e3c-adc4404fe4dc',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 0,
          },
          {
            id: 'ddbab7e9-ad7e-485e-9dc8-8aad30553bda',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/accept',
            startTime: 1630997932934864400,
            endTime: 1630997932934868700,
            parentSpanId: '652865a8-3544-48fb-bfae-3f91f3af7bc0',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/accept',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '652865a8-3544-48fb-bfae-3f91f3af7bc0',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'ddbab7e9-ad7e-485e-9dc8-8aad30553bda',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4248,
          },
          {
            id: '5f8b5313-23e0-4459-bd5c-a5aea127010c',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP POST',
            startTime: 1630997932886000000,
            endTime: 1630997932889000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'POST',
              http_status_code: '200',
              http_url: 'http://172.22.149.240:8080/api/data/sql',
              operation_name: 'HTTP POST',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'http://172.22.149.240:8080',
              peer_hostname: '172.22.149.240:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '5f8b5313-23e0-4459-bd5c-a5aea127010c',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3000000,
          },
          {
            id: '5efe38ec-0910-4cdf-8a01-56fbb12eef64',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/Statement/execute',
            startTime: 1630997932877000000,
            endTime: 1630997932880000000,
            parentSpanId: 'b5a6fb7d-cc31-470e-a357-a7aeb6b579db',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.161',
              operation_name: 'Mysql/Statement/execute',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'b5a6fb7d-cc31-470e-a357-a7aeb6b579db',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '5efe38ec-0910-4cdf-8a01-56fbb12eef64',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3000000,
          },
          {
            id: '85ee1ec5-9698-4fdb-9616-bff8a847054b',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/accept',
            startTime: 1630997932923816700,
            endTime: 1630997932923822800,
            parentSpanId: 'f07cfe27-56fd-487e-a635-9bab69d7974f',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/accept',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'f07cfe27-56fd-487e-a635-9bab69d7974f',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '85ee1ec5-9698-4fdb-9616-bff8a847054b',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 6179,
          },
          {
            id: '995843fb-2701-4348-b211-e918a2902ae0',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/PreparedStatement/executeQuery',
            startTime: 1630997932864000000,
            endTime: 1630997932867000000,
            parentSpanId: '056df025-8a45-44af-a22d-feaabe99aec6',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_statement:
                'SELECT `id` , `employeeCode` , `employeeName` , `employeeTypeDict` , `employeeMail` , `employeePhone` , `employeeAddress` , `employeeSourceDict` , `employeeStatusDict` , `entryDate` , `resignationDate` , `employeeDesc` , `_version` , `createdAt` , `updatedAt` , `isDeleted` , `deletedAt` , `UpdatedBy` AS `updatedBy` , `CreatedBy` AS `createdBy` , `entity` AS `entity` , `district` AS `district` , `department` AS `department` , `person` AS `person` , `user` AS `user` , `jobBO` AS `jobBO` , `relationEntity` AS `relationEntity` FROM `organization__employee_b_o` WHERE (`user` = ? ) AND `isDeleted` = 0 LIMIT 0  , 2  ; ',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.172',
              operation_name: 'Mysql/PreparedStatement/executeQuery',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '056df025-8a45-44af-a22d-feaabe99aec6',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '995843fb-2701-4348-b211-e918a2902ae0',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3000000,
          },
          {
            id: '69fac55c-fa16-4888-8476-c3cc52eae246',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/PEXPIRE/accept',
            startTime: 1630997932825821000,
            endTime: 1630997932825825800,
            parentSpanId: '5e86bead-bb39-45b1-9148-7758e77c5563',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/PEXPIRE/accept',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '5e86bead-bb39-45b1-9148-7758e77c5563',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '69fac55c-fa16-4888-8476-c3cc52eae246',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4920,
          },
          {
            id: 'a114c4f5-b54f-423b-bfcd-2c9f141e0465',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/accept',
            startTime: 1630997932823128000,
            endTime: 1630997932823135200,
            parentSpanId: '8d52ed34-ce95-48e4-a93f-0d8cf0cf59ae',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/accept',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '8d52ed34-ce95-48e4-a93f-0d8cf0cf59ae',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'a114c4f5-b54f-423b-bfcd-2c9f141e0465',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 7160,
          },
          {
            id: '44e6c8a6-c8f5-4159-b16f-58055286b96b',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/HGET/onComplete',
            startTime: 1630997932934966800,
            endTime: 1630997932934968600,
            parentSpanId: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/HGET/onComplete',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '44e6c8a6-c8f5-4159-b16f-58055286b96b',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 1807,
          },
          {
            id: '1fa97b5e-e74d-4d64-bb9f-3e93a24faf25',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'POST http://172.22.147.197:8080/api/data/sql',
            startTime: 1630997932926000000,
            endTime: 1630997932928000000,
            parentSpanId: 'c2784886-275e-4fb0-bae7-b92c556a9efb',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: '172.22.147.197:8080',
              host_ip: '10.65.6.161',
              http_method: 'POST',
              http_path: '/api/data/sql',
              http_status_code: '200',
              http_url: 'http://172.22.147.197:8080/api/data/sql',
              operation_name: 'POST http://172.22.147.197:8080/api/data/sql',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'c2784886-275e-4fb0-bae7-b92c556a9efb',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '1fa97b5e-e74d-4d64-bb9f-3e93a24faf25',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 2000000,
          },
          {
            id: '4eb6afb6-3f0a-4ac2-9f6b-1184995c40bb',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP POST',
            startTime: 1630997932909000000,
            endTime: 1630997932917000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'POST',
              http_status_code: '200',
              http_url: 'http://172.22.149.240:8080/api/data/sql',
              operation_name: 'HTTP POST',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'http://172.22.149.240:8080',
              peer_hostname: '172.22.149.240:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '4eb6afb6-3f0a-4ac2-9f6b-1184995c40bb',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 8000000,
          },
          {
            id: 'a2663116-68a5-40ec-bf24-ceaf5b733fdc',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/writeToChannelAndFlush',
            startTime: 1630997932825885200,
            endTime: 1630997932825914400,
            parentSpanId: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_statement: 'GET',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/writeToChannelAndFlush',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'a2663116-68a5-40ec-bf24-ceaf5b733fdc',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 29096,
          },
          {
            id: '752a39bd-8bcb-4842-a3cd-b757e6c2b80d',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP GET',
            startTime: 1630997932930000000,
            endTime: 1630997932935000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'GET',
              http_status_code: '200',
              http_url:
                'http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache?uuid=8865a710-b206-4cc3-b586-be5fb75a46fagaia_Gaia_product&type=trantor_data_permission&userId=528045',
              operation_name: 'HTTP GET',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'http://admin-01e1149851.project-3-staging.svc.cluster.local:8080',
              peer_hostname: 'admin-01e1149851.project-3-staging.svc.cluster.local:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '752a39bd-8bcb-4842-a3cd-b757e6c2b80d',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 5000000,
          },
          {
            id: 'eeec755f-11d5-456b-a5a1-bcc83f4e498f',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'POST http://172.22.147.197:8080/api/data/sql',
            startTime: 1630997932900000000,
            endTime: 1630997932908000000,
            parentSpanId: '',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              db_instance: 'trantor_gaia_uat',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.161',
              http_method: 'POST',
              http_path: '/api/data/sql',
              http_status_code: '200',
              http_url: 'http://172.22.147.197:8080/api/data/sql',
              operation_name: 'POST http://172.22.147.197:8080/api/data/sql',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'eeec755f-11d5-456b-a5a1-bcc83f4e498f',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: 'eeec755f-11d5-456b-a5a1-bcc83f4e498f',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 8000000,
          },
          {
            id: 'c697511a-b532-4487-9c3d-ccccea2c7586',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/PreparedStatement/executeQuery',
            startTime: 1630997932868000000,
            endTime: 1630997932869000000,
            parentSpanId: '056df025-8a45-44af-a22d-feaabe99aec6',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_statement:
                'SELECT `id` , `fulfillmentWay` , `entityCode` , `entityName` , `entityShortName` , `entityType` , `entityStatus` , `entityCategory` , `entityUserBelonging` , `_version` , `createdAt` , `updatedAt` , `isDeleted` , `deletedAt` , `UpdatedBy` AS `updatedBy` , `CreatedBy` AS `createdBy` , `region` AS `region` , `currency` AS `currency` , `parentEntity` AS `parentEntity` , `company` AS `company` , `person` AS `person` , `user` AS `user` FROM `md__entity_b_o` WHERE (`id` IN (20210434002 ) ) AND `isDeleted` = 0 ; ',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.172',
              operation_name: 'Mysql/PreparedStatement/executeQuery',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '056df025-8a45-44af-a22d-feaabe99aec6',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: 'c697511a-b532-4487-9c3d-ccccea2c7586',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 1000000,
          },
          {
            id: '15182ccd-76c0-47f8-a27e-dc988adaa43d',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'POST http://172.22.144.185:8080/api/internal/trantor/business-context/rpc',
            startTime: 1630997932850000000,
            endTime: 1630997932871000000,
            parentSpanId: '7a865dba-a1d5-464e-ab17-424223628609',
            timestamp: 0,
            tags: {
              application_id: '9',
              application_name: 'gaia-base-runtime',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: '172.22.144.185:8080',
              host_ip: '10.65.6.131',
              http_method: 'POST',
              http_path: '/api/internal/trantor/business-context/rpc',
              http_status_code: '200',
              http_url: 'http://172.22.144.185:8080/api/internal/trantor/business-context/rpc',
              operation_name: 'POST http://172.22.144.185:8080/api/internal/trantor/business-context/rpc',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '7a865dba-a1d5-464e-ab17-424223628609',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '14',
              runtime_name: 'release/develop',
              service_id: '9_release/develop_gaia-base-runtime',
              service_name: 'gaia-base-runtime',
              span_id: '15182ccd-76c0-47f8-a27e-dc988adaa43d',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 21000000,
          },
          {
            id: '7a865dba-a1d5-464e-ab17-424223628609',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'HTTP POST',
            startTime: 1630997932849000000,
            endTime: 1630997932871000000,
            parentSpanId: '6c63b123-7b19-46da-87fb-60de46655b66',
            timestamp: 0,
            tags: {
              application_id: '11',
              application_name: 'gaia-trading-runtime',
              cluster_name: 'ubras-uat',
              component: 'OkHttp',
              host: 'node-010065006180',
              host_ip: '10.65.6.180',
              http_method: 'POST',
              http_status_code: '200',
              http_url: 'http://172.22.144.185:8080/api/internal/trantor/business-context/rpc',
              operation_name: 'HTTP POST',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '6c63b123-7b19-46da-87fb-60de46655b66',
              peer_address: 'http://172.22.144.185:8080',
              peer_hostname: '172.22.144.185:8080',
              peer_port: '8080',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '18',
              runtime_name: 'release/develop',
              service_id: '11_release/develop_gaia-trading-runtime',
              service_name: 'gaia-trading-runtime',
              span_id: '7a865dba-a1d5-464e-ab17-424223628609',
              span_kind: 'client',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 22000000,
          },
          {
            id: 'dd0efef5-d932-4376-86da-246765b3f964',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
            startTime: 1630997932921938000,
            endTime: 1630997932924665600,
            parentSpanId: '77214a1b-760a-4ac2-9a8f-d56c6105422a',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Dubbo',
              dubbo_method: 'queryLocalCacheFlag',
              dubbo_service: 'io.terminus.taurus.api.facade.AuthFacade',
              host: '172.22.148.23:26830',
              host_ip: '10.65.6.162',
              operation_name: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '77214a1b-760a-4ac2-9a8f-d56c6105422a',
              peer_address: '172.22.153.15:58840',
              peer_port: '26830',
              peer_service: 'io.terminus.taurus.api.facade.AuthFacade',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'dd0efef5-d932-4376-86da-246765b3f964',
              span_kind: 'server',
              span_layer: 'rpc',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 2727765,
          },
          {
            id: 'f07cfe27-56fd-487e-a635-9bab69d7974f',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/onComplete',
            startTime: 1630997932921028000,
            endTime: 1630997932921032400,
            parentSpanId: 'dd0efef5-d932-4376-86da-246765b3f964',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/onComplete',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'dd0efef5-d932-4376-86da-246765b3f964',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'f07cfe27-56fd-487e-a635-9bab69d7974f',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4238,
          },
          {
            id: '157abd51-767b-4288-9832-6508ce9e58f4',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/PreparedStatement/executeQuery',
            startTime: 1630997932904000000,
            endTime: 1630997932907000000,
            parentSpanId: 'eeec755f-11d5-456b-a5a1-bcc83f4e498f',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_statement:
                'SELECT `id` , `categoryCode` , `categoryName` , `categoryUsage` , `categoryType` , `categoryLevel` , `isLeaf` , `usedCnt` , `categoryStatus` , `categoryImage` , `categoryDscp` , `_version` , `createdAt` , `updatedAt` , `isDeleted` , `deletedAt` , `UpdatedBy` AS `updatedBy` , `CreatedBy` AS `createdBy` , `parentCategory` AS `parentCategory` , `taxRate` AS `taxRate` FROM `md__category_b_o` WHERE (`id` = ? ) AND `isDeleted` = 0 ; ',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.161',
              operation_name: 'Mysql/PreparedStatement/executeQuery',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'eeec755f-11d5-456b-a5a1-bcc83f4e498f',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '157abd51-767b-4288-9832-6508ce9e58f4',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3000000,
          },
          {
            id: '3df44546-feb2-4b12-972c-d2d41bc4d66f',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/accept',
            startTime: 1630997932857303300,
            endTime: 1630997932857308700,
            parentSpanId: '67a6222b-449e-4dd6-abdd-de87714470c1',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/accept',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '67a6222b-449e-4dd6-abdd-de87714470c1',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '3df44546-feb2-4b12-972c-d2d41bc4d66f',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 5447,
          },
          {
            id: 'dc2c9d8f-b4b9-4105-8283-0c4516273b2b',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/accept',
            startTime: 1630997932826481700,
            endTime: 1630997932826486800,
            parentSpanId: 'a7d12445-a7c5-4a5d-9735-4d20171b4c36',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_type: 'Redis',
              host: 'node-010065006162',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/accept',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'a7d12445-a7c5-4a5d-9735-4d20171b4c36',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'dc2c9d8f-b4b9-4105-8283-0c4516273b2b',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 5194,
          },
          {
            id: '1ff10461-405e-48ae-b7ef-e81519f96599',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/PEXPIRE/writeToChannelAndFlush',
            startTime: 1630997932823214600,
            endTime: 1630997932823255600,
            parentSpanId: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_statement: 'PEXPIRE',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/PEXPIRE/writeToChannelAndFlush',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '1ff10461-405e-48ae-b7ef-e81519f96599',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 40937,
          },
          {
            id: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'io.terminus.draco.api.facade.UcUserReadFacade.findUserByToken(FindUserByTokenRequest)',
            startTime: 1630997932821286400,
            endTime: 1630997932827887400,
            parentSpanId: '084ce16a-9a27-44e6-ac0c-57de1b21d026',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Dubbo',
              dubbo_method: 'findUserByToken',
              dubbo_service: 'io.terminus.draco.api.facade.UcUserReadFacade',
              host: '172.22.148.23:26830',
              host_ip: '10.65.6.162',
              operation_name: 'io.terminus.draco.api.facade.UcUserReadFacade.findUserByToken(FindUserByTokenRequest)',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '084ce16a-9a27-44e6-ac0c-57de1b21d026',
              peer_address: '172.22.153.15:58840',
              peer_port: '26830',
              peer_service: 'io.terminus.draco.api.facade.UcUserReadFacade',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '738f6a36-99bd-43e4-9c8f-9af9771383c2',
              span_kind: 'server',
              span_layer: 'rpc',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 6600784,
          },
          {
            id: 'd2ee77e6-726d-4a4d-855e-d98966eb8105',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/HGET/writeToChannelAndFlush',
            startTime: 1630997932934020000,
            endTime: 1630997932934057200,
            parentSpanId: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_statement: 'HGET',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/HGET/writeToChannelAndFlush',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '2f6f379f-337d-4af7-99ab-43724a20e6c2',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: 'd2ee77e6-726d-4a4d-855e-d98966eb8105',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 37178,
          },
          {
            id: '8d149dea-0bd5-4f69-bfe3-d283dea500e0',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName:
              'GET http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache',
            startTime: 1630997932930955500,
            endTime: 1630997932935634700,
            parentSpanId: '752a39bd-8bcb-4842-a3cd-b757e6c2b80d',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: 'admin-01e1149851.project-3-staging.svc.cluster.local:8080',
              host_ip: '10.65.6.160',
              http_method: 'GET',
              http_path: '/open/api/acl/client/auth/enable-local-cache',
              http_status_code: '200',
              http_url:
                'http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache',
              operation_name:
                'GET http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '752a39bd-8bcb-4842-a3cd-b757e6c2b80d',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_admin',
              service_name: 'admin',
              span_id: '8d149dea-0bd5-4f69-bfe3-d283dea500e0',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4679169,
          },
          {
            id: '77214a1b-760a-4ac2-9a8f-d56c6105422a',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
            startTime: 1630997932919806000,
            endTime: 1630997932924285400,
            parentSpanId: 'fe9d3f44-e1a0-4035-b32f-80988f6818c7',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Dubbo',
              dubbo_method: 'queryLocalCacheFlag',
              dubbo_service: 'io.terminus.taurus.api.facade.AuthFacade',
              host: '172.22.153.15:0',
              host_ip: '10.65.6.179',
              operation_name: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'fe9d3f44-e1a0-4035-b32f-80988f6818c7',
              peer_address: '172.22.148.23:26830',
              peer_port: '26830',
              peer_service: 'io.terminus.taurus.api.facade.AuthFacade',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_admin',
              service_name: 'admin',
              span_id: '77214a1b-760a-4ac2-9a8f-d56c6105422a',
              span_kind: 'client',
              span_layer: 'rpc',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4479511,
          },
          {
            id: '7cf9b6b6-85c1-4b95-a6d5-15f0d8be52d1',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/PreparedStatement/executeQuery',
            startTime: 1630997932880000000,
            endTime: 1630997932884000000,
            parentSpanId: 'b5a6fb7d-cc31-470e-a357-a7aeb6b579db',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_statement:
                'SELECT `id` , `categoryCode` , `categoryName` , `categoryUsage` , `categoryType` , `categoryLevel` , `isLeaf` , `usedCnt` , `categoryStatus` , `categoryImage` , `categoryDscp` , `_version` , `createdAt` , `updatedAt` , `isDeleted` , `deletedAt` , `UpdatedBy` AS `updatedBy` , `CreatedBy` AS `createdBy` , `parentCategory` AS `parentCategory` , `taxRate` AS `taxRate` FROM `md__category_b_o` WHERE (`id` = ? AND `categoryName` LIKE ? ) AND `isDeleted` = 0 ; ',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.161',
              operation_name: 'Mysql/PreparedStatement/executeQuery',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'b5a6fb7d-cc31-470e-a357-a7aeb6b579db',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '7cf9b6b6-85c1-4b95-a6d5-15f0d8be52d1',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4000000,
          },
          {
            id: '47593d8d-805d-4df3-a52d-721b0a0ca3a6',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Mysql/Statement/execute',
            startTime: 1630997932861000000,
            endTime: 1630997932864000000,
            parentSpanId: '056df025-8a45-44af-a22d-feaabe99aec6',
            timestamp: 0,
            tags: {
              application_id: '4',
              application_name: 'trantor-gaia',
              cluster_name: 'ubras-uat',
              component: 'Mysql',
              db_instance: 'trantor_gaia_uat',
              db_type: 'Mysql',
              host: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              host_ip: '10.65.6.172',
              operation_name: 'Mysql/Statement/execute',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '056df025-8a45-44af-a22d-feaabe99aec6',
              peer_hostname: 'oms-app-uat.mysql.rds.aliyuncs.com:3306',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '10',
              runtime_name: 'release/develop',
              service_id: '4_release/develop_datastore',
              service_name: 'datastore',
              span_id: '47593d8d-805d-4df3-a52d-721b0a0ca3a6',
              span_kind: 'client',
              span_layer: 'db',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 3000000,
          },
          {
            id: '084ce16a-9a27-44e6-ac0c-57de1b21d026',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'io.terminus.draco.api.facade.UcUserReadFacade.findUserByToken(FindUserByTokenRequest)',
            startTime: 1630997932820051700,
            endTime: 1630997932826590700,
            parentSpanId: '72b53a20-663b-4ec3-925f-c551caf1634c',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Dubbo',
              dubbo_method: 'findUserByToken',
              dubbo_service: 'io.terminus.draco.api.facade.UcUserReadFacade',
              host: '172.22.153.15:0',
              host_ip: '10.65.6.179',
              operation_name: 'io.terminus.draco.api.facade.UcUserReadFacade.findUserByToken(FindUserByTokenRequest)',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '72b53a20-663b-4ec3-925f-c551caf1634c',
              peer_address: '172.22.148.23:26830',
              peer_port: '26830',
              peer_service: 'io.terminus.draco.api.facade.UcUserReadFacade',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_admin',
              service_name: 'admin',
              span_id: '084ce16a-9a27-44e6-ac0c-57de1b21d026',
              span_kind: 'client',
              span_layer: 'rpc',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 6539062,
          },
          {
            id: 'fe9d3f44-e1a0-4035-b32f-80988f6818c7',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName:
              'GET http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache',
            startTime: 1630997932919372300,
            endTime: 1630997932924798500,
            parentSpanId: '55e24795-cc53-4e56-871a-236a55e308be',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: 'admin-01e1149851.project-3-staging.svc.cluster.local:8080',
              host_ip: '10.65.6.179',
              http_method: 'GET',
              http_path: '/open/api/acl/client/auth/enable-local-cache',
              http_status_code: '200',
              http_url:
                'http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache',
              operation_name:
                'GET http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '55e24795-cc53-4e56-871a-236a55e308be',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_admin',
              service_name: 'admin',
              span_id: 'fe9d3f44-e1a0-4035-b32f-80988f6818c7',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 5426313,
          },
          {
            id: '738b35de-a869-4ec3-b1bb-5b01cd8752fd',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/HGET/writeToChannelAndFlush',
            startTime: 1630997932857485600,
            endTime: 1630997932857524200,
            parentSpanId: '1c52e883-ee2c-447a-8490-d1f5e481520b',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_statement: 'HGET',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/HGET/writeToChannelAndFlush',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '1c52e883-ee2c-447a-8490-d1f5e481520b',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '738b35de-a869-4ec3-b1bb-5b01cd8752fd',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 38497,
          },
          {
            id: '3b8945ef-f063-4588-bb54-ac99d0f458d4',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'Lettuce/GET/writeToChannelAndFlush',
            startTime: 1630997932855561500,
            endTime: 1630997932855606800,
            parentSpanId: '1c52e883-ee2c-447a-8490-d1f5e481520b',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Redis',
              db_statement: 'GET',
              db_type: 'Redis',
              host: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              host_ip: '10.65.6.162',
              operation_name: 'Lettuce/GET/writeToChannelAndFlush',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '1c52e883-ee2c-447a-8490-d1f5e481520b',
              peer_service: 'oms-app-uat.redis.rds.aliyuncs.com:6379',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_server',
              service_name: 'server',
              span_id: '3b8945ef-f063-4588-bb54-ac99d0f458d4',
              span_layer: 'cache',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 45349,
          },
          {
            id: '7aa57686-e9ee-44ba-b37c-0c907f76d8db',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
            startTime: 1630997932854445300,
            endTime: 1630997932858796000,
            parentSpanId: '317c0dd2-ba13-44e7-8093-52be46f77c0f',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'Dubbo',
              dubbo_method: 'queryLocalCacheFlag',
              dubbo_service: 'io.terminus.taurus.api.facade.AuthFacade',
              host: '172.22.148.147:0',
              host_ip: '10.65.6.160',
              operation_name: 'io.terminus.taurus.api.facade.AuthFacade.queryLocalCacheFlag(QueryLocalCacheRequest)',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: '317c0dd2-ba13-44e7-8093-52be46f77c0f',
              peer_address: '172.22.148.23:26830',
              peer_port: '26830',
              peer_service: 'io.terminus.taurus.api.facade.AuthFacade',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_admin',
              service_name: 'admin',
              span_id: '7aa57686-e9ee-44ba-b37c-0c907f76d8db',
              span_kind: 'client',
              span_layer: 'rpc',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 4350682,
          },
          {
            id: '317c0dd2-ba13-44e7-8093-52be46f77c0f',
            traceId: 'b86b2ea59206b61e8eb2826475f38fcc',
            operationName:
              'GET http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache',
            startTime: 1630997932853063200,
            endTime: 1630997932858180000,
            parentSpanId: 'e93aabfe-d8b1-4e03-8091-42608f3fa1f5',
            timestamp: 0,
            tags: {
              application_id: '6',
              application_name: 'trantor-user-runtime',
              cluster_name: 'ubras-uat',
              component: 'SpringBoot',
              host: 'admin-01e1149851.project-3-staging.svc.cluster.local:8080',
              host_ip: '10.65.6.160',
              http_method: 'GET',
              http_path: '/open/api/acl/client/auth/enable-local-cache',
              http_status_code: '200',
              http_url:
                'http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache',
              operation_name:
                'GET http://admin-01e1149851.project-3-staging.svc.cluster.local:8080/open/api/acl/client/auth/enable-local-cache',
              org_id: '1',
              org_name: 'ubras',
              parent_span_id: 'e93aabfe-d8b1-4e03-8091-42608f3fa1f5',
              project_id: '3',
              project_name: 'ubras',
              runtime_id: '12',
              runtime_name: 'release/develop',
              service_id: '6_release/develop_admin',
              service_name: 'admin',
              span_id: '317c0dd2-ba13-44e7-8093-52be46f77c0f',
              span_kind: 'server',
              span_layer: 'http',
              terminus_key: 'x0d66026f037d434b85d00af3422a899e',
              trace_id: 'b86b2ea59206b61e8eb2826475f38fcc',
              workspace: 'STAGING',
            },
            duration: 5116899,
          },
        ],
        duration: 259000000,
        serviceCount: 6,
        depth: 54,
        spanCount: 77,
      };
      const content = transformTrace(response);
      const { needReturn } = payload;
      if (needReturn) {
        return content;
      }
      update({ traceDetailContent: content });
    },
    async getSpanDetailContent({ call, update }, payload: { span: any; visible: boolean }) {
      const response = await call(getSpanDetailContent, payload);
      const annotations = response.span.annotations || [];
      // 接口返回timestamp为毫秒，duration为微秒，统一为微秒
      const spanDetailContent = {
        ...response,
        annotations: annotations.map((item: any) => {
          return { ...item, timestamp: item.timestamp * 1000 };
        }),
      };
      update({ spanDetailContent });
    },
  },
  reducers: {
    setRequestTraceParams(state, payload: IParams) {
      state.requestTraceParams = payload;
    },
    setCurrentTraceRequestId(state, payload: string) {
      state.currentTraceRequestId = payload;
    },
    setTraceStatusListPaging(state, payload: { page?: number; size?: number; total?: number }) {
      state.traceStatusListPaging = {
        ...state.traceStatusListPaging,
        ...payload,
      };
    },
    clearRequestTraceParams(state) {
      state.requestTraceParams = DEFAULT_REQUEST_PARAMS;
    },
    clearCurrentTraceRequestId(state) {
      state.currentTraceRequestId = '';
    },
    clearTraceStatusDetail(state) {
      state.traceStatusDetail = {};
    },
  },
});

export default traceQuerier;
